node-module-man: `node_modules` 磁盘空间清理工具

### 1. 简介

本项目旨在开发一个跨平台的命令行工具，用于扫描用户指定路径下的所有 `node_modules` 目录，统计它们占用的硬盘空间，并提供一个交互式的 TUI 界面供用户选择性地删除这些目录以释放磁盘空间。

* **项目名称：** Node Modules Cleaner TUI (暂定)
* **目标用户：** 经常进行前端/Node.js 开发的开发者。
* **技术栈：** Go 语言、`github.com/charmbracelet/bubbletea` (TUI)。

### 2. 功能需求 (Functional Requirements)

#### 2.1. 扫描功能 (Scanning)

* **R001 - 路径输入：**
    * 工具启动时，应允许用户指定一个 **根目录** 进行扫描 (例如：通过命令行参数或 TUI 输入框)。
    * 如果未指定，默认扫描 **当前工作目录**。
* **R002 - 递归扫描：**
    * 工具必须从指定的根目录开始，**递归** 遍历所有子目录，找出所有名为 `node_modules` 的文件夹。
* **R003 - 空间统计：**
    * 对于找到的每一个 `node_modules` 目录，计算其所占用的 **总硬盘空间大小**。
    * **非功能性要求 (NFR)：** 扫描过程应该是**异步或并发**的，以提高扫描速度，防止 TUI 界面卡死。
* **R004 - 结果收集：**
    * 收集完整的目录路径及其对应的占用空间大小。

#### 2.2. TUI 交互界面 (TUI Interface - powered by `bubbletea`)

* **R005 - 扫描中状态：**
    * 在扫描进行时，TUI 界面应显示一个**加载指示器**和当前正在扫描的路径，或已找到的目录数量和累计大小，以提供反馈。
* **R006 - 结果列表展示：**
    * 扫描完成后，TUI 界面应展示一个**可滚动**的列表，列出所有找到的 `node_modules` 目录。
    * 每项应包含：**相对/绝对路径**、**占用空间大小** (以 B, KB, MB, GB 为单位，自动选择最合适的单位)。
    * 列表应显示**总计**找到的目录数量和**总计**占用空间。
* **R007 - 排序与筛选：**
    * 允许用户按 **大小** (升序/降序) 或 **路径** 进行排序。
    * (可选) 允许用户通过**路径名称**进行实时筛选/搜索。
* **R008 - 目录选择：**
    * 用户应能够通过方向键导航列表，并使用 **空格键** 或其他指定键来**选择/取消选择**要删除的目录 (多选功能)。
    * 选中项应有明确的视觉标记。
* **R009 - 确认删除操作：**
    * 提供一个明确的按钮/快捷键 (**例如：`d` 或 `Enter`**) 来触发删除所选目录的操作。

#### 2.3. 删除功能 (Deletion)

* **R010 - 确认提示：**
    * 在执行删除操作前，必须弹出一个**确认对话框**，显示用户选择了多少个目录以及将释放多少空间，要求用户再次确认 (**例如：输入 `YES` 或按 `y` 键**)。
* **R011 - 目录删除：**
    * 确认后，工具应安全地删除所有选定的 `node_modules` 目录及其内容。
    * **非功能性要求 (NFR)：** 删除过程应是**并发**的，以提高效率。
* **R012 - 删除进度与结果：**
    * 删除过程中，TUI 应显示一个**进度条**或状态信息，显示已完成的删除数量。
    * 删除完成后，显示一个总结信息，说明成功删除的目录数量和释放的总空间，以及任何删除失败的目录和原因。

### 3. 技术要求 (Technical Requirements)

* **语言：** Go (Golang)
* **TUI 库：** `github.com/charmbracelet/bubbletea`
* **文件操作：** 使用 Go 的标准库 (`os`, `path/filepath`, `io/fs`) 来进行文件遍历和删除。需要注意权限问题和跨平台兼容性。
* **空间计算：** 确保空间计算的准确性，并能正确处理大文件和大量目录。
* **代码结构：**
    * 遵循 `bubbletea` 的 **Model-View-Update** 架构。
    * 将扫描和删除逻辑 (业务逻辑) 与 TUI 逻辑 (表示层) 分离。

### 4. TUI 模型与组件 (TUI Model & Components)

本项目的主要 `bubbletea` 模型 (`model`) 可能需要包含以下状态和组件：

| 状态/组件 | 描述 |
| :--- | :--- |
| **`Status`** (Enum) | `Scanning`, `Ready`, `Deleting`, `Done` |
| **`Path`** (string) | 用户指定的根目录。 |
| **`Results`** ([]ResultItem) | 存储扫描到的所有目录信息 (`Path`, `Size`, `Selected` bool)。 |
| **`List`** (component) | 使用 `github.com/charmbracelet/lipgloss` 或 `list` 组件来显示结果列表。 |
| **`Cursor`** (int) | 当前在列表中选中的项目索引。 |
| **`Spinner`** (component) | 扫描和删除时显示的加载指示器 (`github.com/charmbracelet/bubbles/spinner`)。 |
| **`TotalSize`** (int64) | 所有 `node_modules` 的总大小。 |
| **`SelectedSize`** (int64) | 选定要删除的 `node_modules` 的总大小。 |
| **`ConfirmationModel`** | (子模型) 处理删除前的确认逻辑。 |

---

### 5. 待办事项 (Next Steps)

1.  **环境设置：** 设置 Go 项目结构并安装 `bubbletea` 依赖。
2.  **基本 TUI 框架：** 实现一个基本的 `bubbletea.Model`, `Init`, `Update`, `View` 结构，显示欢迎信息。
3.  **核心扫描逻辑：** 独立实现跨平台的目录递归扫描和空间计算功能。
4.  **整合 TUI 列表：** 将扫描结果导入到 `bubbletea` 列表中，实现导航和选择。
5.  **删除实现：** 实现安全的目录删除逻辑，并集成确认对话框和进度反馈。

---

**您希望我从哪个部分开始提供代码示例或更详细的实现指南呢？例如：**

* **A.** 如何设置一个基本的 `bubbletea` TUI 框架？
* **B.** 如何用 Go 实现递归扫描 `node_modules` 目录并计算大小？
* **C.** 如何在 `bubbletea` 中实现多选列表？
